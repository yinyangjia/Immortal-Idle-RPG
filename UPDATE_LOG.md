# 📜 万古仙途：无限数值 - 开发同步手册

## 📌 当前项目状态
- **版本:** v1.0.0 (基础框架版)
- **开发阶段:** 核心引擎部署
- **当前机制:** 自动挂机、1秒回合制战斗、数值突破系统。

## ⚔️ 核心战斗属性 (Combat Stats)
- **HP (生命):** 归零则战斗失败。
- **ATK (攻击):** 基础输出。
- **DEF (防御):** 减免伤害。
- **PEN (破甲):** 削减对方防御力。
- **公式:** `实际伤害 = Max(1, 攻击 - (防御 - 破甲))`

## 🌍 地图与机制 (Maps)
1. **野外挂机 (Field):** 自动循环，怪物强度随玩家战力浮动。
2. **挑战首领 (Boss):** 强力数值检测，用于获取大量修为。
3. **镇妖无限塔 (Tower):** 指数级数值增长，每10层一个小坎，奖励永久加成。

## 🛠️ 全局变量与字典
- **存储方式:** `localStorage` (本地存档)
- **主要变量:** `realmIdx` (境界索引), `towerFloor` (塔层数), `exp` (当前修为)

# 📜 万古仙途：无限数值 - 开发同步手册

## 📌 项目状态
- **版本:** v1.1.0 (经济与历练更新)
- **更新时间:** 2026-02-14
- **核心变更:** 野外怪物选择、货币系统、背包界面。

## 💰 经济与背包系统 (Economy)
- **货币:** `money` (灵石)，击杀野外怪物和BOSS掉落。
- **背包:** `inventory` (对象存储)，格式 `{ "物品名": 数量 }`。
- **界面:** 新增 `modal` 弹窗类，用于显示背包和怪物列表。

## 🌍 地图机制更新 (Maps v2)
1. **野外 (Field):** - 不再单一刷怪。
   - 玩家需手动选择挑战的怪物等级（如：野兔 vs 玄水巨蟒）。
   - 收益与风险成正比。
2. **镇妖塔 (Tower):** 保持指数增长。
3. **BOSS:** 固定高收益挑战。

## 🛠️ 文件变动记录
- `index.html`: 重构布局，修复缩进，增加背包/选择器弹窗结构。
- `js/data.js`: 新增 `fieldMonsters` 数组配置。
- `js/engine.js`: 重写 `loop` 逻辑，增加 `switchMap` 的弹窗判定，增加 `gainReward` 结算函数。
- `style.css`: 增加 `.modal` 和 `.grid-list` 样式。

## 🐛 待办/已知问题
- 暂时物品还没有实际使用效果（如吃丹药），仅作为收集品。
- 需要在后续增加“商店”或“物品使用”逻辑。
